demian@AR01ENOT0579:~/tmp/aws-terraform-curso/ejercicios-creados/15-oct-25/e1$ terraform apply
Acquiring state lock. This may take a few moments...
var.db_password
  Enter a value: 

var.my_ip_cidr
  IP pública del cliente en CIDR (x.x.x.x/32).

  Enter a value: 190.51.142.184/32

data.aws_vpc.default: Reading...
data.aws_vpc.default: Read complete after 2s [id=vpc-0f82cd54f705e66ee]
data.aws_subnets.default_vpc_subnets: Reading...
aws_security_group.rds_pg: Refreshing state... [id=sg-0ceee12eb9f045aae]
data.aws_subnets.default_vpc_subnets: Read complete after 0s [id=us-east-1]
aws_db_subnet_group.default_vpc: Refreshing state... [id=rds-subnets-demian]

Terraform used the selected providers to generate the following execution plan. Resource actions are
indicated with the following symbols:
  + create

Terraform will perform the following actions:

  # aws_db_instance.pg will be created
  + resource "aws_db_instance" "pg" {
      + address                               = (known after apply)
      + allocated_storage                     = 20
      + apply_immediately                     = true
      + arn                                   = (known after apply)
      + auto_minor_version_upgrade            = true
      + availability_zone                     = (known after apply)
      + backup_retention_period               = 0
      + backup_target                         = (known after apply)
      + backup_window                         = (known after apply)
      + ca_cert_identifier                    = (known after apply)
      + character_set_name                    = (known after apply)
      + copy_tags_to_snapshot                 = false
      + database_insights_mode                = (known after apply)
      + db_name                               = "appdb"
      + db_subnet_group_name                  = "rds-subnets-demian"
      + dedicated_log_volume                  = false
      + delete_automated_backups              = true
      + deletion_protection                   = false
      + domain_fqdn                           = (known after apply)
      + endpoint                              = (known after apply)
      + engine                                = "postgres"
      + engine_lifecycle_support              = (known after apply)
      + engine_version                        = "16"
      + engine_version_actual                 = (known after apply)
      + hosted_zone_id                        = (known after apply)
      + id                                    = (known after apply)
      + identifier                            = "pg-demian"
      + identifier_prefix                     = (known after apply)
      + instance_class                        = "db.t3.micro"
      + iops                                  = (known after apply)
      + kms_key_id                            = (known after apply)
      + latest_restorable_time                = (known after apply)
      + license_model                         = (known after apply)
      + listener_endpoint                     = (known after apply)
      + maintenance_window                    = (known after apply)
      + master_user_secret                    = (known after apply)
      + master_user_secret_kms_key_id         = (known after apply)
      + monitoring_interval                   = 0
      + monitoring_role_arn                   = (known after apply)
      + multi_az                              = (known after apply)
      + nchar_character_set_name              = (known after apply)
      + network_type                          = (known after apply)
      + option_group_name                     = (known after apply)
      + parameter_group_name                  = (known after apply)
      + password                              = (sensitive value)
      + password_wo                           = (write-only attribute)
      + performance_insights_enabled          = false
      + performance_insights_kms_key_id       = (known after apply)
      + performance_insights_retention_period = (known after apply)
      + port                                  = (known after apply)
      + publicly_accessible                   = true
      + replica_mode                          = (known after apply)
      + replicas                              = (known after apply)
      + resource_id                           = (known after apply)
      + skip_final_snapshot                   = true
      + snapshot_identifier                   = (known after apply)
      + status                                = (known after apply)
      + storage_throughput                    = (known after apply)
      + storage_type                          = "gp3"
      + tags                                  = {
          + "Name" = "rds-pg-demian"
        }
      + tags_all                              = {
          + "Name" = "rds-pg-demian"
        }
      + timezone                              = (known after apply)
      + username                              = "pgadmin"
      + vpc_security_group_ids                = [
          + "sg-0ceee12eb9f045aae",
        ]
    }

Plan: 1 to add, 0 to change, 0 to destroy.

Changes to Outputs:
  + rds_endpoint = (known after apply)

Do you want to perform these actions?
  Terraform will perform the actions described above.
  Only 'yes' will be accepted to approve.

  Enter a value: yes

aws_db_instance.pg: Creating...
aws_db_instance.pg: Still creating... [00m10s elapsed]
aws_db_instance.pg: Still creating... [00m20s elapsed]
aws_db_instance.pg: Still creating... [00m30s elapsed]
aws_db_instance.pg: Still creating... [00m40s elapsed]
aws_db_instance.pg: Still creating... [00m50s elapsed]
aws_db_instance.pg: Still creating... [01m00s elapsed]
aws_db_instance.pg: Still creating... [01m10s elapsed]
aws_db_instance.pg: Still creating... [01m20s elapsed]
aws_db_instance.pg: Still creating... [01m30s elapsed]
aws_db_instance.pg: Still creating... [01m40s elapsed]
aws_db_instance.pg: Still creating... [01m50s elapsed]
aws_db_instance.pg: Still creating... [02m00s elapsed]
aws_db_instance.pg: Still creating... [02m10s elapsed]
aws_db_instance.pg: Still creating... [02m20s elapsed]
aws_db_instance.pg: Still creating... [02m30s elapsed]
aws_db_instance.pg: Still creating... [02m40s elapsed]
aws_db_instance.pg: Still creating... [02m50s elapsed]
aws_db_instance.pg: Still creating... [03m00s elapsed]
aws_db_instance.pg: Still creating... [03m10s elapsed]
aws_db_instance.pg: Still creating... [03m20s elapsed]
aws_db_instance.pg: Still creating... [03m30s elapsed]
aws_db_instance.pg: Still creating... [03m40s elapsed]
aws_db_instance.pg: Still creating... [03m50s elapsed]
aws_db_instance.pg: Still creating... [04m00s elapsed]
aws_db_instance.pg: Still creating... [04m10s elapsed]
aws_db_instance.pg: Still creating... [04m20s elapsed]
aws_db_instance.pg: Still creating... [04m30s elapsed]
aws_db_instance.pg: Still creating... [04m40s elapsed]
aws_db_instance.pg: Still creating... [04m50s elapsed]
aws_db_instance.pg: Still creating... [05m00s elapsed]
aws_db_instance.pg: Still creating... [05m10s elapsed]
aws_db_instance.pg: Creation complete after 5m20s [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM]
Releasing state lock. This may take a few moments...

Apply complete! Resources: 1 added, 0 changed, 0 destroyed.

Outputs:

rds_db_name = "appdb"
rds_endpoint = "pg-demian.cq52ci6gqyiw.us-east-1.rds.amazonaws.com"
demian@AR01ENOT0579:~/tmp/aws-terraform-curso/ejercicios-creados/15-oct-25/e1$ terraform destroy
Acquiring state lock. This may take a few moments...
var.db_password
  Enter a value: 

var.my_ip_cidr
  IP pública del cliente en CIDR (x.x.x.x/32).

  Enter a value: 190.51.142.184/32

data.aws_vpc.default: Reading...
data.aws_vpc.default: Read complete after 2s [id=vpc-0f82cd54f705e66ee]
data.aws_subnets.default_vpc_subnets: Reading...
aws_security_group.rds_pg: Refreshing state... [id=sg-0ceee12eb9f045aae]
data.aws_subnets.default_vpc_subnets: Read complete after 0s [id=us-east-1]
aws_db_subnet_group.default_vpc: Refreshing state... [id=rds-subnets-demian]
aws_db_instance.pg: Refreshing state... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM]

Terraform used the selected providers to generate the following execution plan. Resource actions are
indicated with the following symbols:
  - destroy

Terraform will perform the following actions:

  # aws_db_instance.pg will be destroyed
  - resource "aws_db_instance" "pg" {
      - address                               = "pg-demian.cq52ci6gqyiw.us-east-1.rds.amazonaws.com" -> null
      - allocated_storage                     = 20 -> null
      - apply_immediately                     = true -> null
      - arn                                   = "arn:aws:rds:us-east-1:251964342273:db:pg-demian" -> null
      - auto_minor_version_upgrade            = true -> null
      - availability_zone                     = "us-east-1d" -> null
      - backup_retention_period               = 0 -> null
      - backup_target                         = "region" -> null
      - backup_window                         = "06:14-06:44" -> null
      - ca_cert_identifier                    = "rds-ca-rsa2048-g1" -> null
      - copy_tags_to_snapshot                 = false -> null
      - customer_owned_ip_enabled             = false -> null
      - database_insights_mode                = "standard" -> null
      - db_name                               = "appdb" -> null
      - db_subnet_group_name                  = "rds-subnets-demian" -> null
      - dedicated_log_volume                  = false -> null
      - delete_automated_backups              = true -> null
      - deletion_protection                   = false -> null
      - domain_dns_ips                        = [] -> null
      - enabled_cloudwatch_logs_exports       = [] -> null
      - endpoint                              = "pg-demian.cq52ci6gqyiw.us-east-1.rds.amazonaws.com:5432" -> null
      - engine                                = "postgres" -> null
      - engine_lifecycle_support              = "open-source-rds-extended-support" -> null
      - engine_version                        = "16" -> null
      - engine_version_actual                 = "16.8" -> null
      - hosted_zone_id                        = "Z2R2ITUGPM61AM" -> null
      - iam_database_authentication_enabled   = false -> null
      - id                                    = "db-2K7CMRPKR6CR7FGXZYWWRIULWM" -> null
      - identifier                            = "pg-demian" -> null
      - instance_class                        = "db.t3.micro" -> null
      - iops                                  = 3000 -> null
      - license_model                         = "postgresql-license" -> null
      - listener_endpoint                     = [] -> null
      - maintenance_window                    = "mon:10:15-mon:10:45" -> null
      - master_user_secret                    = [] -> null
      - max_allocated_storage                 = 0 -> null
      - monitoring_interval                   = 0 -> null
      - multi_az                              = false -> null
      - network_type                          = "IPV4" -> null
      - option_group_name                     = "default:postgres-16" -> null
      - parameter_group_name                  = "default.postgres16" -> null
      - password                              = (sensitive value) -> null
      - password_wo                           = (write-only attribute) -> null
      - performance_insights_enabled          = false -> null
      - performance_insights_retention_period = 0 -> null
      - port                                  = 5432 -> null
      - publicly_accessible                   = true -> null
      - replicas                              = [] -> null
      - resource_id                           = "db-2K7CMRPKR6CR7FGXZYWWRIULWM" -> null
      - skip_final_snapshot                   = true -> null
      - status                                = "available" -> null
      - storage_encrypted                     = false -> null
      - storage_throughput                    = 125 -> null
      - storage_type                          = "gp3" -> null
      - tags                                  = {
          - "Name" = "rds-pg-demian"
        } -> null
      - tags_all                              = {
          - "Name" = "rds-pg-demian"
        } -> null
      - username                              = "pgadmin" -> null
      - vpc_security_group_ids                = [
          - "sg-0ceee12eb9f045aae",
        ] -> null
        # (16 unchanged attributes hidden)
    }

  # aws_db_subnet_group.default_vpc will be destroyed
  - resource "aws_db_subnet_group" "default_vpc" {
      - arn                     = "arn:aws:rds:us-east-1:251964342273:subgrp:rds-subnets-demian" -> null
      - description             = "Managed by Terraform" -> null
      - id                      = "rds-subnets-demian" -> null
      - name                    = "rds-subnets-demian" -> null
      - subnet_ids              = [
          - "subnet-01dffbc60d9951748",
          - "subnet-04abea6db58cd4ff8",
          - "subnet-04debad39df922a56",
          - "subnet-04f746c9f174c9f39",
          - "subnet-099e698fd24fba763",
          - "subnet-0b62e1e6c6e98a07b",
        ] -> null
      - supported_network_types = [
          - "IPV4",
        ] -> null
      - tags                    = {
          - "Name" = "rds-subnets-demian"
        } -> null
      - tags_all                = {
          - "Name" = "rds-subnets-demian"
        } -> null
      - vpc_id                  = "vpc-0f82cd54f705e66ee" -> null
        # (1 unchanged attribute hidden)
    }

  # aws_security_group.rds_pg will be destroyed
  - resource "aws_security_group" "rds_pg" {
      - arn                    = "arn:aws:ec2:us-east-1:251964342273:security-group/sg-0ceee12eb9f045aae" -> null
      - description            = "Permite PostgreSQL (5432) solo desde la IP del cliente" -> null
      - egress                 = [
          - {
              - cidr_blocks      = [
                  - "0.0.0.0/0",
                ]
              - from_port        = 0
              - ipv6_cidr_blocks = []
              - prefix_list_ids  = []
              - protocol         = "-1"
              - security_groups  = []
              - self             = false
              - to_port          = 0
                # (1 unchanged attribute hidden)
            },
        ] -> null
      - id                     = "sg-0ceee12eb9f045aae" -> null
      - ingress                = [
          - {
              - cidr_blocks      = [
                  - "190.51.142.184/32",
                ]
              - description      = "PostgreSQL"
              - from_port        = 5432
              - ipv6_cidr_blocks = []
              - prefix_list_ids  = []
              - protocol         = "tcp"
              - security_groups  = []
              - self             = false
              - to_port          = 5432
            },
        ] -> null
      - name                   = "rds-pg-demian" -> null
      - owner_id               = "251964342273" -> null
      - revoke_rules_on_delete = false -> null
      - tags                   = {
          - "Name" = "sg-rds-pg-demian"
        } -> null
      - tags_all               = {
          - "Name" = "sg-rds-pg-demian"
        } -> null
      - vpc_id                 = "vpc-0f82cd54f705e66ee" -> null
        # (1 unchanged attribute hidden)
    }

Plan: 0 to add, 0 to change, 3 to destroy.

Changes to Outputs:
  - rds_db_name  = "appdb" -> null
  - rds_endpoint = "pg-demian.cq52ci6gqyiw.us-east-1.rds.amazonaws.com" -> null

Do you really want to destroy all resources?
  Terraform will destroy all your managed infrastructure, as shown above.
  There is no undo. Only 'yes' will be accepted to confirm.

  Enter a value: yes

aws_db_instance.pg: Destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 00m10s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 00m20s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 00m30s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 00m40s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 00m50s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 01m00s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 01m10s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 01m20s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 01m30s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 01m40s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 01m50s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 02m00s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 02m10s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 02m20s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 02m30s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 02m40s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 02m50s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 03m00s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 03m10s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 03m20s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 03m30s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 03m40s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 03m50s elapsed]
aws_db_instance.pg: Still destroying... [id=db-2K7CMRPKR6CR7FGXZYWWRIULWM, 04m00s elapsed]
aws_db_instance.pg: Destruction complete after 4m6s
aws_db_subnet_group.default_vpc: Destroying... [id=rds-subnets-demian]
aws_security_group.rds_pg: Destroying... [id=sg-0ceee12eb9f045aae]
aws_db_subnet_group.default_vpc: Destruction complete after 1s
aws_security_group.rds_pg: Destruction complete after 2s
Releasing state lock. This may take a few moments...

Destroy complete! Resources: 3 destroyed.